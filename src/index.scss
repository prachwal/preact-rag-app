@use 'sass:map';

// Base variables
$font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
$line-height: 1.5;
$font-weight: 400;

// Variant color definitions
$variants: (
  standard: (
    dark: (
      text: #e0e0e0,
      bg: #121212,
      link: #646cff,
      link-hover: #535bf2,
      button: #ffffff,
      button-bg: #1a1a1a,
      code: #888,
      bg-code: #222222aa
    ),
    light: (
      text: #213547,
      bg: #f9f9f9,
      link: #646cff,
      link-hover: #535bf2,
      button: #000000,
      button-bg: #eaeaea,
      code: #555,
      bg-code: #f5f5f5aa
    )
  ),
  sepia: (
    dark: (
      text: #d4c5a9,
      bg: #2a2520,
      link: #8b7d6b,
      link-hover: #a08c7a,
      button: #d4c5a9,
      button-bg: #3a332d,
      code: #b8a892,
      bg-code: #3a332daa
    ),
    light: (
      text: #704214,
      bg: #f5f0e1,
      link: #8b7d6b,
      link-hover: #a08c7a,
      button: #704214,
      button-bg: #e8dcc8,
      code: #8b7d6b,
      bg-code: #e8dcc8aa
    )
  ),
  forest: (
    dark: (
      text: #e8f5e8,
      bg: #1b2e1b,
      link: #4caf50,
      link-hover: #66bb6a,
      button: #e8f5e8,
      button-bg: #2e4d2e,
      code: #81c784,
      bg-code: #2e4d2eaa
    ),
    light: (
      text: #1b2e1b,
      bg: #e8f5e8,
      link: #2e7d32,
      link-hover: #4caf50,
      button: #1b2e1b,
      button-bg: #c8e6c9,
      code: #4caf50,
      bg-code: #c8e6c9aa
    )
  ),
  ocean: (
    dark: (
      text: #e3f2fd,
      bg: #0d1b2a,
      link: #2196f3,
      link-hover: #64b5f6,
      button: #e3f2fd,
      button-bg: #1e3a5f,
      code: #90caf9,
      bg-code: #1e3a5faa
    ),
    light: (
      text: #0d1b2a,
      bg: #e3f2fd,
      link: #1565c0,
      link-hover: #2196f3,
      button: #0d1b2a,
      button-bg: #bbdefb,
      code: #2196f3,
      bg-code: #bbdefbaa
    )
  )
);

// Mixin to apply variant colors
@mixin apply-variant-colors($variant, $mode) {
  $colors: map.get(map.get($variants, $variant), $mode);
  --color-text: #{map.get($colors, text)};
  --color-bg: #{map.get($colors, bg)};
  --color-link: #{map.get($colors, link)};
  --color-link-hover: #{map.get($colors, link-hover)};
  --color-button: #{map.get($colors, button)};
  --color-button-bg: #{map.get($colors, button-bg)};
  --color-code: #{map.get($colors, code)};
  --color-bg-code: #{map.get($colors, bg-code)};
}

:root {
  font-family: $font-family;
  line-height: $line-height;
  font-weight: $font-weight;

  color-scheme: light dark;
  color: var(--color-text, #e0e0e0);
  background-color: var(--color-bg, #121212);

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Dark mode variants */
@each $variant, $modes in $variants {
  :root[data-mode="dark"][data-variant="#{$variant}"] {
    @include apply-variant-colors($variant, dark);
  }
}

/* Light mode variants */
@each $variant, $modes in $variants {
  :root[data-mode="light"][data-variant="#{$variant}"] {
    @include apply-variant-colors($variant, light);
  }
}

/* Auto mode - uses media queries with variant */
@media (prefers-color-scheme: dark) {
  @each $variant, $modes in $variants {
    :root:not([data-mode])[data-variant="#{$variant}"] {
      @include apply-variant-colors($variant, dark);
    }
  }
}

@media (prefers-color-scheme: light) {
  @each $variant, $modes in $variants {
    :root:not([data-mode])[data-variant="#{$variant}"] {
      @include apply-variant-colors($variant, light);
    }
  }
}

a {
  font-weight: 500;
  color: var(--color-link, #646cff);
  text-decoration: inherit;

  &:hover {
    color: var(--color-link-hover, #535bf2);
  }
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  color: var(--color-button, #000000);
  background-color: var(--color-button-bg, #1a1a1a);
  cursor: pointer;
  transition: border-color 0.25s;

  &:hover {
    border-color: var(--color-link, #646cff);
  }

  &:focus,
  &:focus-visible {
    outline: 4px auto -webkit-focus-ring-color;
  }
}

#app {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;

  &:hover {
    filter: drop-shadow(0 0 2em #646cffaa);
  }

  &.preact:hover {
    filter: drop-shadow(0 0 2em #673ab8aa);
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: var(--color-code, #888);
  background-color: var(--color-bg-code, #222222aa);
}